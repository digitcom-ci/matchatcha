<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Détails du Produit</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="navbar">
      <a href="javascript:history.back()" class="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" class="feather feather-arrow-left">
          <path d="M19 12H5"></path>
          <path d="M12 19l-7-7 7-7"></path>
        </svg>
        Retour
      </a>

      <!-- Icône de Connexion/Déconnexion -->
      <div class="login-icon">
          <a href="login.html" id="login-link">
              <svg id="icon-connexion" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                  <circle cx="12" cy="8" r="4" fill="#4CAF50"></circle>
                  <path d="M12 14c-5 0-9 2.5-9 5v1h18v-1c0-2.5-4-5-9-5z" fill="#4CAF50"></path>
              </svg>
          </a>
          <a href="#" id="logout-link" style="display: none;" onclick="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                  <path d="M10 17l5-5h-4v-2h4l-5-5 1.5-1.5 7 7-7 7zM14 3v2h-9v12h9v2h-9c-1.1 0-1.99-.9-1.99-2l-.01-12c0-1.1.89-2 1.99-2h9z"></path>
              </svg>
          </a>
      </div>

      <div class="cart-icon">
        <a href="panier.html">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M7 4h14l-1.5 9h-12l-1.5-9zm0 2l1.1 6h11.8l1.1-6h-14zm3.8 10c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2zm7 0c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2z"></path>
          </svg>
          <span id="cart-notification" class="notification-badge">0</span>
        </a>
      </div>
      <div class="hamburger" onclick="toggleMenu()">☰</div>
      <nav id="nav-links">
        <a href="index.html">Accueil</a>
        <a href="matcha.html">Pourquoi le matcha</a>
        <a href="products.html">Nos Produits</a>
        <a href="benefits.html">Conseils et Recettes</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Section Détail du Produit -->
  <section id="product-details">
    <div id="product-container">
      <!-- Contenu dynamique du produit sera chargé ici -->
    </div>

    <form id="product-form">
      <label for="variant">Choisir une variante :</label>
      <select id="variant" name="variant" required>
        <!-- Les options de variantes seront ajoutées en JavaScript -->
      </select>

      <label for="quantity">Quantité :</label>
      <select id="quantity" name="quantity" required>
        <!-- Les options de quantité seront ajoutées en JavaScript -->
      </select>

      <button type="button" id="add-to-cart" onclick="addToCart()" class="add-to-cart" disabled>Ajouter au panier</button>

      <p id="message" style="display: none;">Produit ajouté au panier !</p>
    </form>
  </section>

  <!-- Section Produits Similaires -->
  <section id="related-products">
    <h3>Vous pourriez également aimer</h3>
    <div class="related-products-container">
      <!-- Les produits similaires seront insérés ici via JavaScript -->
    </div>
  </section>

 <script>
    function toggleMenu() {
      const navLinks = document.getElementById('nav-links');
      navLinks.classList.toggle('active');
    }

    function updateCartNotification() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
      document.getElementById('cart-notification').innerText = totalItems;
    }

    // Fonction pour récupérer l'ID du produit depuis l'URL
    function getProductIdFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }

    const currency = "FCFA"; // Devise dynamique

    const products = [
      {
        id: 1,
        name: "Matcha Bio",
        price: 7000,
        description: "Matcha bio provenant du Japon. Idéal pour un boost naturel.",
        variants: [
          { name: "30g", price: 7000 },
          { name: "50g", price: 10000 },
          { name: "100g", price: 15000 }
        ],
        details: "30g",
        container: "boîte plastique",
        image: "images/matchapoudre.png"
      },
      {
        id: 2,
        name: "Matcha Latte",
        price: 5000,
        description: "Mélange de matcha, de lait (ou de lait végétal), et de sucre.",
        variants: [
          { name: "Classique", price: 5000 },
          { name: "Vanille", price: 5000 },
          { name: "Caramel", price: 5000 },
          { name: "Miel", price: 5000 }
        ],
        details: "250ml",
        container: "cup en plastique",
        image: "images/matchalatte2.jpeg"
      },
      {
        id: 3,
        name: "Matcha Smoothie",
        price: 7500,
        description: "Smoothie au matcha et banane pour une texture crémeuse.",
        variants: [
          { name: "Matcha-Banane", price: 7500 },
          { name: "Détox", price: 7500 }
        ],
        details: "250ml",
        container: "cup en plastique",
        image: "images/matchasmoothie.jpeg"
      },
      {
        id: 4,
        name: "Bubble Matcha",
        price: 7000,
        description: "Boisson unique avec matcha et perles de tapioca.",
        variants: [
          { name: "Lait de coco", price: 7000 },
          { name: "Frappé avec boba", price: 7000 },
          { name: "Sirop de fruits", price: 7000 }
        ],
        details: "250ml",
        container: "cup en plastique",
        image: "images/bubblematcha.jpeg"
      },
      {
        id: 5,
        name: "Thé Matcha",
        price: 3000,
        description: "Boisson traditionnelle japonaise préparée avec du matcha.",
        details: "100ml",
        container: "cup en plastique",
        image: "images/thematcha1.jpeg"
      }
    ];

    function loadProduct() {
      const params = new URLSearchParams(window.location.search);
      const productId = parseInt(params.get("id"));
      const product = products.find(p => p.id === productId);

      if (product) {
        const productContainer = document.getElementById("product-container");
        const productHTML = 
          <img src="${product.image}" alt="${product.name}">
          <h1>${product.name}</h1>
          <p>${product.description}</p>
          <p><strong>Prix:</strong> ${product.price} ${currency}</p>
          <p><strong>Détails:</strong> ${product.details}</p>
          <p><strong>Conditionnement:</strong> ${product.container}</p>
        ;
        productContainer.innerHTML = productHTML;

        const variantSelect = document.getElementById("variant");
        product.variants.forEach(variant => {
          const option = document.createElement("option");
          option.value = variant.name;
          option.textContent = ${variant.name} - ${variant.price} ${currency};
          variantSelect.appendChild(option);
        });

        const quantitySelect = document.getElementById("quantity");
        for (let i = 1; i <= 10; i++) {
          const option = document.createElement("option");
          option.value = i;
          option.textContent = i;
          quantitySelect.appendChild(option);
        }

        const addToCartButton = document.getElementById("add-to-cart");
        quantitySelect.addEventListener("change", () => {
          addToCartButton.disabled = quantitySelect.value < 1;
        });

        loadRelatedProducts(productId);
      }
    }

    function loadRelatedProducts(productId) {
      const relatedProducts = products.filter(p => p.id !== productId);
      const relatedProductsContainer = document.querySelector('.related-products-container');
      relatedProductsContainer.innerHTML = '';

      relatedProducts.forEach(product => {
        const productHTML = 
          <div class="related-product">
            <img src="${product.image}" alt="${product.name}">
            <h4>${product.name}</h4>
            <p>${product.description}</p>
            <p><strong>Prix:</strong> ${product.price} ${currency}</p>
            <a href="product-details.html?id=${product.id}" class="view-details">Voir le produit</a>
          </div>
        ;
        relatedProductsContainer.innerHTML += productHTML;
      });
    }

    function addToCart() {
      const variantSelect = document.getElementById('variant');
      const quantitySelect = document.getElementById('quantity');
      const variant = variantSelect.value;
      const quantity = parseInt(quantitySelect.value);

      const productId = getProductIdFromURL();
      const product = products.find(p => p.id === parseInt(productId));

      if (product) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartItem = {
          id: product.id,
          name: product.name,
          variant: variant,
          price: product.price,
          quantity: quantity
        };

        cart.push(cartItem);
        localStorage.setItem('cart', JSON.stringify(cart));
        document.getElementById('message').style.display = 'block';
        updateCartNotification();
      }
    }

    loadProduct();

    // Fonction pour gérer le clic sur l'icône de connexion
    function handleLoginClick() {
        const isLoggedIn = localStorage.getItem('loggedInUser');
        if (isLoggedIn) {
            const confirmLogout = confirm("Voulez-vous vous déconnecter ?");
            if (confirmLogout) {
                logout();
            }
        } else {
            window.location.href = 'login.html';
        }
    }

    // Fonction de déconnexion
    function logout() {
        localStorage.removeItem('loggedInUser');
        alert("Déconnexion réussie.");
        window.location.href = 'index.html';
    }
    });
 </script>
  

</body>
</html>

