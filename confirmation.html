<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation de Commande</title>
    <style>
        /* Style général */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        /* Corps de la page */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f8f9fa;
            padding: 20px;
        }

        /* Conteneur principal */
        .container {
            width: 100%;
            max-width: 500px;
            background-color: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Titre */
        h2 {
            font-size: 1.5rem;
            color: #688F4E;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        /* Style des labels et champs de saisie */
        label {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.5rem;
            display: inline-block;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        /* Textarea */
        textarea {
            resize: vertical;
            height: 80px;
        }

        /* Bouton de confirmation */
        button[type="submit"] {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            background-color: #688F4E;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button[type="submit"]:hover {
            background-color: #2b463c;
        }

        /* Résumé de la commande */
        #order-summary {
            text-align: center;
            margin-top: 1rem;
        }

        #order-summary p {
            font-size: 0.9rem;
            color: #333;
        }

        /* Bouton Retour */
        .return-button {
            margin-top: 1.5rem;
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            background-color: #688F4E;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .return-button:hover {
            background-color: #2b463c;
        }
    </style>
</head>
<body>

    <h2>Confirmation de Commande</h2>

    <div class="container">
    <form id="order-form">
        <label for="first-name">Nom:</label>
        <input type="text" id="first-name" name="firstName" required>

        <label for="last-name">Prénom:</label>
        <input type="text" id="last-name" name="lastName" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="phone">Numéro de Téléphone:</label>
        <input type="tel" id="phone" name="phone" required>

        <label for="country">Pays:</label>
        <input type="text" id="country" name="country" value="Côte d'Ivoire" readonly>

        <label for="city">Ville:</label>
        <select id="city" name="city" required>
            <option value="Abidjan Sud">Abidjan Sud - 1500 FCFA</option>
            <option value="Abidjan Nord">Abidjan Nord - 1000 FCFA</option>
            <option value="Bassam">Bassam - 2000 FCFA</option>
            <option value="Bonoua">Bonoua - 3000 FCFA</option>
            <option value="Aboisso">Aboisso - 5000 FCFA</option>
            <option value="Assinie">Assinie - 3000 FCFA</option>
            <option value="Yamoussoukro">Yamoussoukro - 3000 FCFA</option>
            <option value="Bouaké">Bouaké - 5000 FCFA</option>
        </select>

        <label for="address">Adresse complète:</label>
        <textarea id="address" name="address" required></textarea>

        <button type="submit">Confirmer ma commande</button>
    </form>
    </div>

    <div id="order-summary" style="display:none;">
        <h2>Merci pour votre commande !</h2>
        <p>Votre commande a été confirmée avec succès.</p>
        <p>Nous vous enverrons un email de confirmation avec les détails de votre commande dans quelques minutes.</p>
        <p>Si vous avez des questions, n'hésitez pas à nous contacter.</p>
        <button onclick="window.location.href='index.html'">Retourner à l'accueil</button>
    </div>

    <script>
        const deliveryFees = {
            "Abidjan Sud": 1500,
            "Abidjan Nord": 1000,
            "Bassam": 2000,
            "Bonoua": 3000,
            "Aboisso": 5000,
            "Assinie": 3000,
            "Yamoussoukro": 3000,
            "Bouaké": 5000,
        };

        document.getElementById("order-form").addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData();
            formData.append("firstName", document.getElementById("first-name").value);
            formData.append("lastName", document.getElementById("last-name").value);
            formData.append("email", document.getElementById("email").value);
            formData.append("phone", document.getElementById("phone").value);
            formData.append("city", document.getElementById("city").value);
            formData.append("address", document.getElementById("address").value);
            formData.append("deliveryFee", deliveryFees[document.getElementById("city").value]);

            fetch("send_email.php", {
                method: "POST",
                body: formData,
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === "success") {
                    document.getElementById("order-form").style.display = "none";
                    document.getElementById("order-summary").style.display = "block";
                } else {
                    alert("Erreur : " + data.message);
                }
            })
            .catch(error => alert("Erreur lors de l'envoi : " + error));
        });
        document.getElementById("order-form").addEventListener("submit", function (e) {
    e.preventDefault();

    // Récupérer les articles du panier
    const cartItems = JSON.parse(localStorage.getItem("cart")) || [];

    const formData = new FormData();
    formData.append("firstName", document.getElementById("first-name").value);
    formData.append("lastName", document.getElementById("last-name").value);
    formData.append("email", document.getElementById("email").value);
    formData.append("phone", document.getElementById("phone").value);
    formData.append("city", document.getElementById("city").value);
    formData.append("address", document.getElementById("address").value);
    formData.append("deliveryFee", deliveryFees[document.getElementById("city").value]);
    formData.append("cartItems", JSON.stringify(cartItems));

    fetch("send_email.php", {
        method: "POST",
        body: formData,
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === "success") {
            document.getElementById("order-form").style.display = "none";
            document.getElementById("order-summary").style.display = "block";
        } else {
            alert("Erreur : " + data.message);
        }
    })
    .catch(error => alert("Erreur lors de l'envoi : " + error));
});

    </script>

</body>
</html>
